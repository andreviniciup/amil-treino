# üìã Implementa√ß√£o Completa do Sistema de Divis√£o de Treinos

## Status: ‚è≥ PENDENTE

Data de cria√ß√£o: 28 de outubro de 2025

---

## üéØ Objetivo Geral

Criar uma l√≥gica consistente onde a **divis√£o de treino escolhida no onboarding** (ABC, ABCD, etc.) seja respeitada em **todas as partes do aplicativo**: cria√ß√£o de treinos, visualiza√ß√£o de treinos, e navega√ß√£o entre dias.

---

## ‚úÖ O que J√Å est√° pronto

### 1. OnboardingSplitPage
- ‚úÖ P√°gina criada com 6 op√ß√µes de divis√£o
- ‚úÖ Interface bonita com sele√ß√£o visual
- ‚úÖ Salva no localStorage: `onboarding-split`
- ‚úÖ Integrada no fluxo: training-types ‚Üí **split** ‚Üí days ‚Üí final

**Op√ß√µes dispon√≠veis:**
- Full Body (3 dias)
- Superior/Inferior (4 dias)
- ABC (3 dias) - Peito/Tr√≠ceps | Costas/B√≠ceps | Pernas/Ombros
- ABCD (4 dias) - Peito/Tr√≠ceps | Costas/B√≠ceps | Pernas | Ombros/Abd√¥men
- ABCDE (5 dias) - Peito | Costas | Pernas | Ombros | Bra√ßos
- ABCDEF (6 dias) - Push | Pull | Legs | Push | Pull | Legs

**Estrutura salva:**
```json
{
  "id": "abc",
  "name": "ABC",
  "days": 3,
  "splits": [
    "A - Peito/Tr√≠ceps",
    "B - Costas/B√≠ceps", 
    "C - Pernas/Ombros"
  ]
}
```

---

## üìù PR√ìXIMOS PASSOS

### 1Ô∏è‚É£ Atualizar OnboardingDaysPage

**Problema atual:**
- Permite selecionar QUALQUER quantidade de dias (1-7)
- N√£o valida com base na divis√£o escolhida

**Solu√ß√£o:**
```tsx
// 1. Carregar divis√£o escolhida
const split = JSON.parse(localStorage.getItem('onboarding-split'))

// 2. Validar sele√ß√£o
// - Deve selecionar EXATAMENTE split.days dias
// - Exemplo: ABC = precisa selecionar 3 dias

// 3. Criar mapeamento de dias ‚Üí treinos
const mapping = {
  'Segunda': 'A',
  'Quarta': 'B',
  'Sexta': 'C'
}

// 4. Salvar mapeamento
localStorage.setItem('onboarding-training-days', JSON.stringify({
  selectedDays: ['Segunda', 'Quarta', 'Sexta'],
  mapping: mapping
}))
```

**UI melhorada:**
- Mostrar contador: "Selecione 3 dias (ABC)"
- Desabilitar bot√£o "Avan√ßar" se != 3 dias
- Mostrar preview: "Segunda = A, Quarta = B, Sexta = C"

---

### 2Ô∏è‚É£ Modificar TreinoPage - Navega√ß√£o entre Treinos

**Problema atual:**
- Mostra apenas "Hoje" com um treino gen√©rico
- Sem navega√ß√£o entre A, B, C

**Solu√ß√µes poss√≠veis:**

#### OP√á√ÉO A: Tabs Horizontais (Recomendado)
```tsx
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  [A]  [B]  [C]                 ‚îÇ ‚Üê Tabs clic√°veis
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  Treino A - Peito/Tr√≠ceps       ‚îÇ
‚îÇ  Segunda                        ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  üìã Supino Reto - 4x8           ‚îÇ
‚îÇ  üìã Rosca Direta - 3x12         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### OP√á√ÉO B: Swipe Horizontal (Moderno)
```tsx
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚Üê [B] | Treino A | [C] ‚Üí      ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  Peito/Tr√≠ceps - Segunda        ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  üìã Supino Reto - 4x8           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### OP√á√ÉO C: Dropdown (Simples)
```tsx
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üìÖ Treino A - Segunda    [‚ñº]  ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  Peito/Tr√≠ceps                  ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  üìã Supino Reto - 4x8           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**L√≥gica:**
```typescript
// 1. Carregar divis√£o do perfil do usu√°rio
const userProfile = await workoutApi.getUserProfile()
const split = userProfile.splitConfig // { id: 'abc', days: 3 }

// 2. Buscar treinos criados pelo usu√°rio
const workouts = await workoutApi.getUserPlans()
// Retorna: [
//   { workoutLetter: 'A', dayOfWeek: 'Segunda', exercises: [...] },
//   { workoutLetter: 'B', dayOfWeek: 'Quarta', exercises: [...] },
//   { workoutLetter: 'C', dayOfWeek: 'Sexta', exercises: [...] }
// ]

// 3. Determinar qual √© "hoje"
const today = getCurrentDayOfWeek() // 'Segunda'
const todayWorkout = workouts.find(w => w.dayOfWeek === today)
// todayWorkout = Treino A

// 4. Permitir navega√ß√£o entre A, B, C
const [currentWorkout, setCurrentWorkout] = useState(todayWorkout)
```

---

### 3Ô∏è‚É£ Ajustar CreateWorkoutDay

**Problema atual:**
- Permite criar treino para qualquer dia
- N√£o valida duplica√ß√£o de dias
- N√£o associa √† letra do treino (A, B, C)

**Solu√ß√£o:**

```tsx
// 1. Determinar qual treino est√° criando
const split = userProfile.splitConfig
const existingWorkouts = await workoutApi.getUserPlans()

// Se tem 0 treinos ‚Üí criando A
// Se tem 1 treino (A) ‚Üí criando B
// Se tem 2 treinos (A, B) ‚Üí criando C
const workoutLetter = String.fromCharCode(65 + existingWorkouts.length) // 'A', 'B', 'C'...

// 2. Validar limite
if (existingWorkouts.length >= split.days) {
  showError('Voc√™ j√° criou todos os treinos da sua divis√£o ABC')
  return
}

// 3. Interface
<div>
  <h2>Criando Treino {workoutLetter}</h2>
  <p>{split.splits[existingWorkouts.length]}</p>
  
  <h3>Escolha o dia para este treino:</h3>
  
  {DAYS_OF_WEEK.map(day => {
    const isUsed = existingWorkouts.some(w => w.dayOfWeek === day)
    
    return (
      <DayButton 
        day={day}
        disabled={isUsed}
        selected={selectedDay === day}
        onClick={() => setSelectedDay(day)}
      />
    )
  })}
  
  {isUsed && <p className="text-red">J√° existe treino neste dia</p>}
</div>

// 4. Salvar com letra
await workoutApi.createWorkout({
  ...workoutData,
  workoutLetter: workoutLetter, // 'A', 'B', 'C'
  dayOfWeek: selectedDay,
  splitType: split.id
})
```

---

### 4Ô∏è‚É£ Backend - Salvar Divis√£o no Perfil

**Schema do Banco:**

```prisma
model UserProfile {
  id              String   @id @default(uuid())
  userId          String   @unique
  
  // Dados pessoais existentes
  name            String
  age             Int
  weight          Float
  height          Float
  goal            String?
  
  // ‚≠ê NOVO: Divis√£o de treino
  splitType       String?  // 'abc', 'abcd', 'fullbody', 'upper-lower'
  splitDays       Int?     // 3, 4, 5, 6
  splitConfig     Json?    // Objeto completo da divis√£o
  
  // Mapeamento de dias ‚Üí treinos
  trainingDays    Json?    // { 'Segunda': 'A', 'Quarta': 'B', 'Sexta': 'C' }
  
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  user            User     @relation(fields: [userId], references: [id])
}

model WorkoutPlan {
  id              String   @id @default(uuid())
  userId          String
  name            String
  
  // ‚≠ê NOVO: Identifica√ß√£o do treino na divis√£o
  workoutLetter   String?  // 'A', 'B', 'C', 'D', 'E', 'F'
  dayOfWeek       String?  // 'Segunda', 'Ter√ßa', etc.
  splitType       String?  // Refer√™ncia √† divis√£o
  
  workouts        Workout[]
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  user            User     @relation(fields: [userId], references: [id])
}
```

**Migra√ß√£o:**
```prisma
npx prisma migrate dev --name add_training_split_fields
```

**API Endpoints:**

```typescript
// ===== USER PROFILE =====

// PUT /api/users/profile/split
// Salvar divis√£o escolhida no onboarding
router.put('/profile/split', authenticateUser, async (req, res) => {
  const { splitType, splitDays, splitConfig, trainingDays } = req.body;
  
  const profile = await prisma.userProfile.upsert({
    where: { userId: req.user.id },
    update: {
      splitType,
      splitDays,
      splitConfig,
      trainingDays
    },
    create: {
      userId: req.user.id,
      splitType,
      splitDays,
      splitConfig,
      trainingDays,
      // ... outros campos obrigat√≥rios
    }
  });
  
  res.json(profile);
});

// GET /api/users/profile
// Retornar perfil com divis√£o
router.get('/profile', authenticateUser, async (req, res) => {
  const profile = await prisma.userProfile.findUnique({
    where: { userId: req.user.id }
  });
  
  res.json(profile);
});

// ===== WORKOUTS =====

// POST /api/workouts
// Criar treino com valida√ß√£o de divis√£o
router.post('/', authenticateUser, async (req, res) => {
  const { workoutLetter, dayOfWeek, splitType, ...workoutData } = req.body;
  
  // Validar: n√£o permitir mais treinos que a divis√£o
  const profile = await prisma.userProfile.findUnique({
    where: { userId: req.user.id }
  });
  
  const existingWorkouts = await prisma.workoutPlan.count({
    where: { 
      userId: req.user.id,
      splitType: profile.splitType
    }
  });
  
  if (existingWorkouts >= profile.splitDays) {
    return res.status(400).json({
      error: `Voc√™ j√° criou todos os ${profile.splitDays} treinos da divis√£o ${profile.splitType.toUpperCase()}`
    });
  }
  
  // Validar: n√£o duplicar dia
  const dayExists = await prisma.workoutPlan.findFirst({
    where: {
      userId: req.user.id,
      dayOfWeek: dayOfWeek
    }
  });
  
  if (dayExists) {
    return res.status(400).json({
      error: `J√° existe um treino para ${dayOfWeek}`
    });
  }
  
  // Criar treino
  const workout = await prisma.workoutPlan.create({
    data: {
      ...workoutData,
      workoutLetter,
      dayOfWeek,
      splitType,
      userId: req.user.id
    }
  });
  
  res.json(workout);
});

// GET /api/workouts/by-split
// Buscar treinos da divis√£o atual do usu√°rio
router.get('/by-split', authenticateUser, async (req, res) => {
  const profile = await prisma.userProfile.findUnique({
    where: { userId: req.user.id }
  });
  
  const workouts = await prisma.workoutPlan.findMany({
    where: {
      userId: req.user.id,
      splitType: profile.splitType
    },
    orderBy: {
      workoutLetter: 'asc'
    },
    include: {
      workouts: {
        include: {
          exercises: true
        }
      }
    }
  });
  
  res.json(workouts);
});
```

---

## üîÑ Fluxo Completo (Ponta a Ponta)

### Cen√°rio: Usu√°rio cria divis√£o ABC

```
1. ONBOARDING
   ‚îî‚îÄ Escolhe "ABC" (3 dias)
   ‚îî‚îÄ Salva localStorage: onboarding-split
   
2. ONBOARDING (Days)
   ‚îî‚îÄ Seleciona: Segunda, Quarta, Sexta
   ‚îî‚îÄ Cria mapeamento: { Segunda: 'A', Quarta: 'B', Sexta: 'C' }
   ‚îî‚îÄ Salva localStorage: onboarding-training-days
   
3. ONBOARDING (Final)
   ‚îî‚îÄ Envia para backend:
      POST /api/users/profile/split
      {
        splitType: 'abc',
        splitDays: 3,
        splitConfig: { id: 'abc', name: 'ABC', ... },
        trainingDays: { 'Segunda': 'A', 'Quarta': 'B', 'Sexta': 'C' }
      }
   ‚îî‚îÄ Perfil salvo no banco ‚úÖ
   
4. CRIAR PRIMEIRO TREINO
   ‚îî‚îÄ Entra em /workout/create/intro
   ‚îî‚îÄ Backend valida: 0 treinos existentes
   ‚îî‚îÄ Frontend mostra: "Criando Treino A - Peito/Tr√≠ceps"
   ‚îî‚îÄ Usu√°rio escolhe: Segunda
   ‚îî‚îÄ Salva:
      POST /api/workouts
      {
        name: "Treino A",
        workoutLetter: 'A',
        dayOfWeek: 'Segunda',
        splitType: 'abc',
        exercises: [...]
      }
   ‚îî‚îÄ Treino A criado ‚úÖ
   
5. CRIAR SEGUNDO TREINO
   ‚îî‚îÄ Backend valida: 1 treino existente (A)
   ‚îî‚îÄ Frontend mostra: "Criando Treino B - Costas/B√≠ceps"
   ‚îî‚îÄ Desabilita bot√£o "Segunda" (j√° usado)
   ‚îî‚îÄ Usu√°rio escolhe: Quarta
   ‚îî‚îÄ Treino B criado ‚úÖ
   
6. CRIAR TERCEIRO TREINO
   ‚îî‚îÄ Backend valida: 2 treinos existentes (A, B)
   ‚îî‚îÄ Frontend mostra: "Criando Treino C - Pernas/Ombros"
   ‚îî‚îÄ Desabilita bot√µes "Segunda" e "Quarta"
   ‚îî‚îÄ Usu√°rio escolhe: Sexta
   ‚îî‚îÄ Treino C criado ‚úÖ
   
7. TENTAR CRIAR QUARTO TREINO
   ‚îî‚îÄ Backend valida: 3 treinos existentes
   ‚îî‚îÄ Backend retorna erro 400:
      "Voc√™ j√° criou todos os 3 treinos da divis√£o ABC"
   ‚îî‚îÄ Frontend mostra mensagem ‚ùå
   ‚îî‚îÄ Bot√£o "Criar novo treino" desabilitado
   
8. VER TREINOS (TreinoPage)
   ‚îî‚îÄ Carrega do backend:
      GET /api/workouts/by-split
   ‚îî‚îÄ Retorna: [Treino A, Treino B, Treino C]
   ‚îî‚îÄ Mostra tabs: [A] [B] [C]
   ‚îî‚îÄ Identifica hoje: Segunda
   ‚îî‚îÄ Seleciona tab A automaticamente
   ‚îî‚îÄ Usu√°rio pode navegar: A ‚Üî B ‚Üî C
   
9. COME√áAR TREINO
   ‚îî‚îÄ Segunda-feira, 07:00
   ‚îî‚îÄ Abre app ‚Üí TreinoPage
   ‚îî‚îÄ Sistema detecta: hoje = Segunda = Treino A
   ‚îî‚îÄ Mostra: "Treino A - Peito/Tr√≠ceps"
   ‚îî‚îÄ Usu√°rio clica "Iniciar Treino"
   ‚îî‚îÄ Realiza exerc√≠cios...
   ‚îî‚îÄ Completa treino ‚úÖ
   
10. QUARTA-FEIRA
    ‚îî‚îÄ Abre app ‚Üí TreinoPage
    ‚îî‚îÄ Sistema detecta: hoje = Quarta = Treino B
    ‚îî‚îÄ Mostra: "Treino B - Costas/B√≠ceps"
    ‚îî‚îÄ Continua o ciclo...
```

---

## ‚ùì Decis√µes Pendentes

### 1. Navega√ß√£o entre treinos no TreinoPage
**Op√ß√µes:**
- [ ] A) Tabs horizontais (simples e claro)
- [ ] B) Swipe horizontal (moderno, mobile-first)
- [ ] C) Dropdown (economiza espa√ßo)

**Recomenda√ß√£o:** Op√ß√£o A ou B

---

### 2. Permitir mudan√ßa de divis√£o?
**Cen√°rios:**
- Usu√°rio come√ßa com ABC, depois quer mudar para ABCDE
- J√° tem treinos criados na divis√£o antiga

**Op√ß√µes:**
- [ ] A) N√£o permitir (simplifica l√≥gica)
- [ ] B) Permitir, mas apagar treinos antigos (com confirma√ß√£o)
- [ ] C) Permitir e manter treinos (migra√ß√£o complexa)

**Recomenda√ß√£o:** Op√ß√£o A inicialmente, B depois

---

### 3. L√≥gica de "falta"
**Cen√°rio:**
- Usu√°rio deveria treinar Treino B na Quarta
- N√£o treinou
- Quinta-feira: mostrar qual treino?

**Op√ß√µes:**
- [ ] A) Mostrar Treino B (recuperar sess√£o perdida)
- [ ] B) Seguir calend√°rio (Quinta = nenhum treino, pr√≥ximo √© Sexta = C)
- [ ] C) Perguntar ao usu√°rio

**Recomenda√ß√£o:** Op√ß√£o B (respeitar calend√°rio), com notifica√ß√£o de falta

---

### 4. Bloqueio de cria√ß√£o de treinos
**Cen√°rio:**
- Usu√°rio j√° tem A, B, C completos

**Op√ß√µes:**
- [ ] A) Bloquear cria√ß√£o de novos (obrigar mudar divis√£o)
- [ ] B) Permitir "editar" treinos existentes
- [ ] C) Permitir criar varia√ß√µes (A1, A2, B1, B2)

**Recomenda√ß√£o:** Op√ß√£o B (edi√ß√£o)

---

## üìä Impacto nos Componentes

### Componentes a MODIFICAR:
- ‚úèÔ∏è `OnboardingDaysPage.tsx` - validar quantidade de dias
- ‚úèÔ∏è `OnboardingFinalPage.tsx` - enviar split para backend
- ‚úèÔ∏è `TreinoPage.tsx` - mostrar navega√ß√£o A/B/C
- ‚úèÔ∏è `CreateWorkoutDay.tsx` - validar dias e atribuir letra
- ‚úèÔ∏è `CreateWorkoutIntro.tsx` - mostrar qual treino est√° criando
- ‚úèÔ∏è `MyWorkoutsPage.tsx` - agrupar por divis√£o

### Componentes NOVOS a criar:
- üÜï `WorkoutTabs.tsx` - navega√ß√£o entre A/B/C
- üÜï `SplitIndicator.tsx` - mostrar "Treino A" com √≠cone
- üÜï `DaySelector.tsx` - seletor de dias com valida√ß√£o

### Backend/API:
- ‚úèÔ∏è `userController.ts` - adicionar endpoints de split
- ‚úèÔ∏è `workoutController.ts` - validar split ao criar
- ‚úèÔ∏è `schema.prisma` - adicionar campos

---

## üöÄ Ordem de Implementa√ß√£o Recomendada

### FASE 1: Backend (Funda√ß√£o)
1. Atualizar `schema.prisma`
2. Criar migra√ß√£o
3. Adicionar endpoints `/profile/split`
4. Validar cria√ß√£o de workouts

### FASE 2: Onboarding (Coleta de Dados)
1. Atualizar `OnboardingDaysPage` (valida√ß√£o)
2. Atualizar `OnboardingFinalPage` (envio para backend)
3. Testar fluxo completo

### FASE 3: Visualiza√ß√£o (TreinoPage)
1. Criar componente `WorkoutTabs`
2. Integrar tabs no `TreinoPage`
3. Buscar treinos do backend
4. Detectar "treino de hoje"

### FASE 4: Cria√ß√£o (CreateWorkout)
1. Atualizar `CreateWorkoutIntro` (mostrar letra)
2. Atualizar `CreateWorkoutDay` (valida√ß√£o)
3. Enviar `workoutLetter` ao salvar
4. Testar cria√ß√£o de A, B, C

### FASE 5: Polimento
1. Mensagens de erro amig√°veis
2. Loading states
3. Testes E2E
4. Documenta√ß√£o

---

## üìù Notas de Desenvolvimento

### LocalStorage Keys
```typescript
'onboarding-split' // { id, name, days, splits }
'onboarding-days'  // ['Segunda', 'Quarta', 'Sexta']
'onboarding-training-days' // { selectedDays, mapping }
```

### Backend Response Format
```typescript
// GET /api/users/profile
{
  id: "uuid",
  userId: "user-id",
  splitType: "abc",
  splitDays: 3,
  splitConfig: {
    id: "abc",
    name: "ABC",
    days: 3,
    splits: [...]
  },
  trainingDays: {
    "Segunda": "A",
    "Quarta": "B",
    "Sexta": "C"
  }
}

// GET /api/workouts/by-split
[
  {
    id: "workout-1",
    workoutLetter: "A",
    dayOfWeek: "Segunda",
    name: "Treino A",
    workouts: [{
      trainingType: "Peito/Tr√≠ceps",
      exercises: [...]
    }]
  },
  // ...
]
```

---

## üêõ Poss√≠veis Problemas

1. **M√∫ltiplos planos ativos**
   - Solu√ß√£o: Adicionar campo `isActive` em `WorkoutPlan`
   
2. **Mudan√ßa de fuso hor√°rio**
   - Solu√ß√£o: Trabalhar com dias da semana, n√£o datas
   
3. **Usu√°rio treina fora da divis√£o**
   - Solu√ß√£o: Permitir treino "extra" sem afetar sequ√™ncia
   
4. **Conflito localStorage vs Backend**
   - Solu√ß√£o: Backend √© fonte da verdade, sempre

---

## ‚úÖ Crit√©rios de Sucesso

- [ ] Usu√°rio escolhe divis√£o no onboarding
- [ ] Divis√£o √© salva no backend
- [ ] TreinoPage mostra apenas treinos da divis√£o (A, B, C)
- [ ] N√£o √© poss√≠vel criar mais treinos que a divis√£o permite
- [ ] N√£o √© poss√≠vel duplicar dias
- [ ] Sistema identifica corretamente "treino de hoje"
- [ ] Navega√ß√£o entre treinos funciona perfeitamente
- [ ] Testes passam

---

## üìö Refer√™ncias

- Arquivo: `OnboardingSplitPage.tsx` (j√° implementado)
- Contexto: `OnboardingContext.tsx`
- API: `workoutApi.ts`
- Schema: `schema.prisma`

---

## üîó Links Relacionados

- Issue/Task: [Adicionar aqui quando criar]
- PR: [Adicionar aqui quando criar]
- Design Figma: [Se houver]

---

**√öltima atualiza√ß√£o:** 28 de outubro de 2025  
**Status:** Documenta√ß√£o completa, aguardando implementa√ß√£o  
**Respons√°vel:** [Seu nome]
